<div class="product-detail" *ngIf="product!==undefined">
    <!-- Bread crumbs Start -->
    <div class="breadcrumbs">
        <app-breadcrumb [breadcrumbLinks]="breadcrumbLinks"></app-breadcrumb>

        <!-- <ul class="uk-breadcrumb">
            <li routerLink="/" class="fa fa-angle-right">Home</li>
            <li routerLink="/products" class="fa fa-angle-right">Products</li>
            <li routerLink="/products/all" class="fa fa-angle-right">All Products</li>
        </ul> -->
    </div>
    <!-- Bread crumbs End -->
    <div class="uk-container">
        <div class="uk-grid uk-grid-large">
            <h2 class="heading">{{product?.name}}</h2>
        </div>
        <hr class="m-b-30" />
        <div class="no-top-m uk-grid uk-grid-large">
            <div class="uk-width-1-3@m">
                <div class="category-box">
                    <div *ngFor="let slide of slides">
                        {{slide}}
                    </div>
                    <ngb-carousel *ngIf="product && product.images" [activeId]="activeSlideId">
                        <ng-template *ngFor="let image of product.images" ngbSlide>
                            <img [imageHandler] [src]="image" alt="Random first slide">
                        </ng-template>
                    </ngb-carousel>
                    <ul class="carousel-thumbnail">
                        <li class="carousel-thumbnail__item list-inline-item"
                            *ngFor="let image of product.images;  let i = index" (click)="setActiveSlide(i)">
                            <a class="selected">
                                <img class="carousel-thumbnail__img" [src]="image">
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="m-t-40 category-box">
                    <div class="m-b-20">
                        <a [href]="whatsappUrl" class="uk-icon-button  uk-margin-small-right whatapp-icon"
                            uk-icon="whatsapp"> </a>
                        <a [href]="whatsappUrl" class="social-link"> Share via
                            Whatsapp</a>
                    </div>

                    <div class="m-b-20">
                        <a href="mailto:?subject=%0AThis%20is%20Product%20from%20An%20Elder%20Spring%20Initiative%20by%20Tata%20Trusts&body=Product:%20{{product.name}}%0AProduct%2DURL:%20{{currentUrl}}"
                            class="uk-icon-button  uk-margin-small-right fb-icon" uk-icon="mail"> </a>
                        <a class="social-link"
                            href="mailto:?subject=%0AThis%20is%20Product%20from%20An%20Elder%20Spring%20Initiative%20by%20Tata%20Trusts&body=Product:%20{{product.name}}%0AProduct%2DURL:%20{{currentUrl}}">
                            Share
                            via Email</a>
                    </div>

                    <div>
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{currentUrl}}&t={{product.name}}"
                            class="uk-icon-button  uk-margin-small-right email-icon" uk-icon="facebook"> </a>
                        <a class="social-link"
                            href="https://www.facebook.com/sharer/sharer.php?u={{currentUrl}}&t={{product.name}}">
                            Share via
                            Facebook</a>
                    </div>
                </div>
            </div>
            <div class="uk-width-2-3@m">
                <h2 class="heading2">About</h2>
                <div class="description">
                    {{product?.description}}
                </div>
                <hr />
                <div class="buynow">
                    <table>
                        <tr>
                            <td><a href="{{product?.buyLink}}" target="_blank" class="uk-button uk-button-primary">Buy
                                    On {{product?.buyFrom }}</a></td>
                            <td><span class="price"> Rs. {{product?.price}}</span></td>
                        </tr>
                    </table>
                </div>
                <hr />
                <!-- OLD review Form -->
<!-- 
                <form [formGroup]="reviewForm" class="uk-form">
                    <div class="uk-card uk-card-default comment">
                        <div class="uk-card-header">
                            <h3>Write a Review</h3>
                        </div>
                        <div class="uk-card-body">
                            <div *ngIf="successMessage" class="uk-alert-success" uk-alert>
                                <p>{{ successMessage }}</p>
                            </div>
                            <div uk-grid>
                                <div class="uk-width-1-2@m">
                                    <span
                                        [ngClass]="{'uk-text-danger' : formControl.username.invalid && ( formControl.username.dirty ||  formControl.username.touched) }"
                                        class="p-b-5">Username<span class="required">*</span></span>
                                    <input type="text" class="review-input" formControlName="username"
                                        [ngClass]="{'uk-form-danger' : formControl.username.invalid && ( formControl.username.dirty ||  formControl.username.touched) }"
                                        class="uk-input" placeholder="Enter your name" />
                                </div>
                                <div class="uk-width-1-2@m">
                                    <span
                                        [ngClass]="{'uk-text-danger' : formControl.rating.invalid && ( formControl.rating.dirty ||  formControl.rating.touched) }"
                                        class="p-b-5">Your Rating<span class="required">*</span></span>
                                    <select formControlName="rating"
                                        [ngClass]="{'uk-form-danger' : formControl.rating.invalid && ( formControl.rating.dirty ||  formControl.rating.touched) }"
                                        class="uk-select" placeholder="Enter your rating">
                                        <option value="5">5 Star</option>
                                        <option value="4">4 Star</option>
                                        <option value="3">3 Star</option>
                                        <option value="2">2 Star</option>
                                        <option value="1">1 Star</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <span
                                    [ngClass]="{'uk-text-danger' : formControl.commentTxt.invalid && ( formControl.commentTxt.dirty ||  formControl.commentTxt.touched) }"
                                    class="p-b-5">Your Review<span class="required">*</span></span>
                                <textarea formControlName="commentTxt" class="uk-textarea"
                                    [ngClass]="{'uk-form-danger' : formControl.commentTxt.invalid && ( formControl.commentTxt.dirty ||  formControl.commentTxt.touched) }"
                                    placeholder="Enter your review here"></textarea>
                            </div>
                        </div>
                        <div class="uk-card-footer">
                            <div class="uk-flex uk-flex-right">
                                <button class="uk-button uk-button-primary"
                                    (click)="addComment()">{{ !!user ? 'Submit Review' : 'Signin to Review'}}</button>
                            </div>
                        </div>
                    </div>
                </form> -->

                <!-- Write Review Form START-->
                <div class="m-t-30">

                    <div class="category-box">
                      <h1 class="font-regular-24 font-weight-600">Write a Review</h1>
                      <hr />
                      <!-- Success box START-->
                      <div *ngIf="successMessage" class="uk-alert-success" uk-alert>
                        <p>{{ successMessage }}</p>
                      </div>
                      <!-- Success box END-->
                      <form [formGroup]="reviewForm" (ngSubmit)="addComment()" class="uk-form-stacked review-form">
            
                        <div class="uk-child-width-1-2@s" uk-grid>
                          <div>
                            <div class="uk-margin">
                              <label class="uk-form-label" for="form-stacked-text">Username<span class="required">*</span></label>
                              <div class="uk-form-controls">
                                <input class="uk-input" id="form-stacked-text" formControlName="username" type="text"
                                  placeholder="Enter your name">
                              </div>
                            </div>
                          </div>
                          <div>
                            <div class="uk-margin">
                              <label class="uk-form-label" for="form-stacked-select">Your Rating<span
                                  class="required">*</span></label>
                              <div class="uk-form-controls">
                                <select class="uk-select" formControlName="rating" id="form-stacked-select">
                                  <option disabled selected hidden value="0">Select your rating</option>
                                  <option value="90">5 Star</option>
                                  <option value="80">4 Star</option>
                                  <option value="60">3 Star</option>
                                  <option value="40">2 Star</option>
                                  <option value="20">1 Star</option>
                                </select>
                              </div>
                            </div>
            
                          </div>
            
                        </div>
            
                        <div class="uk-margin">
                          <label class="uk-form-label" for="form-stacked-text">Your Review<span class="required">*</span></label>
                          <div class="uk-form-controls">
                            <textarea formControlName="commentTxt" class="uk-input min-h-200" id="form-stacked-text"
                              placeholder="Enter your review here"></textarea>
                          </div>
                        </div>
            
                        <div class="uk-text-right">
                          <button class="uk-button uk-button-default" type="submit"
                            [disabled]="reviewForm.invalid">{{ !!user ? 'Submit Review' : 'Signin to Review'}}</button>
                        </div>
                      </form>
                    </div>
                  </div>
                <!-- Write Review Form END-->

                <div class="reviews m-t-30" *ngIf="reviews!==undefined">
                    <h2 class="heading2">Reviews ({{reviews.length}})</h2>
                    <!-- <hr /> -->

                    <!-- <div class="uk-card uk-card-default" *ngFor="let reply of reviews">
                        <div class="uk-card-header">
                            <div class="uk-grid-small uk-flex-middle" uk-grid>
                                <div class="uk-width-expand">
                                    <h3 class="uk-card-title uk-margin-remove-bottom">{{reply.userName}}
                                        {{reply.rating}}</h3>
                                    <p class="uk-text-meta uk-margin-remove-top">
                                        <ngb-rating [(rate)]="reply.rating" [readonly]="true" [max]="5">
                                            <ng-template let-fill="fill" let-index="index">
                                                <span class="star" [class.filled]="fill === 100">&#9733;</span>
                                            </ng-template>
                                        </ngb-rating>
                                    </p>
                                </div>
                                <div class="uk-width-auto">
                                    <p class="uk-text-meta">{{ reply.createdAt | timeago }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="uk-card-body">
                            <div [innerHTML]="reply.review">
                            </div>
                        </div>
                        <div class="uk-card-footer">
                            <div class="uk-grid-collapse uk-child-width-expand@s" uk-grid>
                                <div class="like-container">
                                    <img src="/assets/images/like-outline.svg" (click)="likeReply(reply)"> <span
                                        class="like" (click)="likeReply(reply)">{{reply.likeCount}}</span>
                                </div>
                                <div class="reply-container" (click)="setReplyId(reply.id,reply.userName,reply.review)">
                                    <img src="/assets/images/reply.svg"> <label class="reply"> Reply</label>
                                </div>
                            </div>
                        </div>
                    </div> -->

                    <!-- Review Card  START -->
                    <div class="m-t-30" *ngFor="let reply of reviews">
                        <div uk-grid>
                            <div class="uk-width-expand">
                                <div class="child-width-auto" uk-grid>
                                    <div>
                                        <img class="review-avatar" src="assets/images/default-thumbnail.png" />
                                    </div>
                                    <div class="p-l-20">
                                        <p class="font-regular m-0">{{reply.userName}}</p>
                                        <div>
                                            <ngb-rating [(rate)]="reply.rating" [readonly]="true" [max]="5">
                                                <ng-template let-fill="fill" let-index="index">
                                                    <span class="star" [class.filled]="fill === 100">&#9733;</span>
                                                </ng-template>
                                            </ngb-rating>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <p class="font-regular-15">{{ reply.createdAt | timeago }}</p>
                            </div>
                        </div>
                        <div class="m-t-30">
                            <p class="font-regular">{{reply.review}}</p>
                        </div>
                        <div class="m-t-30 m-b-30">
                            <div uk-grid>
                                <div class="uk-width-expand">

                                    <a class="like-link" (click)="likeReply(reply)">
                                        <fa-icon [icon]="['far', 'thumbs-up']" class="m-r-5 font-22"></fa-icon>
                                    </a> {{reply.likeCount}}

                                    <!-- <span class="m-l-5">
                                        <fa-icon [icon]="['far', 'thumbs-down']" class="m-r-5"></fa-icon> 20
                                    </span> -->
                                </div>
                                <div class="replay-link">
                                    <a class="font-regular" (click)="setReplyId(reply.id,reply.userName,reply.review)">
                                        <fa-icon [icon]="['far', 'comments']" class="m-r-5"></fa-icon> Reply
                                    </a>
                                </div>
                            </div>
                        </div>
                        <hr />
                    </div>


                </div>
                <div *ngIf="reviews && reviews.length == 0" class="m-t-30">
                    <div class="uk-child-width-expand" uk-grid>
                        <div class="info">
                            <h1 class="font-regular-24 font-weight-600 m-0"> No review!</h1>
                            <p class="lable font-regular m-0">No user has left review on this service.</p>
                        </div>
                        <div>
                            <img src="/assets/images/norecord.svg" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>